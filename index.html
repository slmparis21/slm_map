<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Add custom icons with Markers</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<style>
body {
  margin: 0;
  padding: 0;
}

#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}

.marker {
  display: block;
  border: none;
  box-sizing:90%;
  cursor: pointer;
  padding: 0;
}

.mapboxgl-popup {
  max-width: 200px;
}

.mapboxgl-popup-content {
  text-align: center;
  font-family: 'Open Sans', sans-serif;
}

</style>
 
<div id="map"></div>
 
<script>
	
mapboxgl.accessToken = 'pk.eyJ1IjoienNvbmcwMDAiLCJhIjoiY2wzZDYxN3g1MDVhYjNqazFzOGdodWV5bCJ9.oyaViQeE9nsbCMloG2aCqA';
const geojson ={
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "Aromateka",
        "address": "Znamenka Ulitsa, 7/3, Пушкино, Moskovskaya oblast, Russia, 119019"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          37.60327234,
          55.74200165
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Parfümerie Aurel",
        "address": "Breite Str. 75, Stendal"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          11.86260375,
          52.60486322
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Aus Liebe Zum Duft",
        "address": "Zeiloch 9, Bruchsal"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          8.586216371,
          49.1381556
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Balduin",
        "address": "Adlerstraße 15 86899 Landsberg am Lech, Germany"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          10.89396432,
          48.05103123
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Basic Crème de la Crème",
        "address": "21 Rue des Élus, 51100 Reims -"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.0314917,
          49.2555133
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Bercalina",
        "address": "2 rue Neuve Saint Roch, Bastia"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          9.450425213,
          42.69829107
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Cour des Hommes",
        "address": "11 Rue des Clercs, 57000 Metz, France"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          6.174013,
          49.117584
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Eiffel",
        "address": "Ulitsa Kuybysheva, 26, Vladikavkaz, Северная Осетия-Алания республика"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          37.607453,
          55.749283
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Fablab",
        "address": "Bondegatan 7, Stockholm"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          18.0778694,
          59.31296891
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Giorgio",
        "address": "18-1 A Uchitel skaya st.,St. Petersburg"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          30.335099,
          59.93428
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Harvey Nichols",
        "address": "109-125 Knightsbridge, Belgravia, London SW1X 7RJ, UK"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -0.159805,
          51.501584
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Hyrv Concept Store",
        "address": "Rotermanni 7, Tallinn"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          24.75655431,
          59.43973086
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Identité Parfumerie",
        "address": "3 rue des Bons Enfants, Muhlouse"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          7.337457078,
          47.74769212
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Impressium",
        "address": "Mysia 3 00-496 Varsovie"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          21.02084547,
          52.23046019
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Impressium",
        "address": "Piotrkowska 243 90-456 Łódź"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          19.46009643,
          51.75158547
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Indigo Perfumery",
        "address": "12011 Detroit Ave, Lakewood, OH 44107"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -81.771735,
          41.48386589
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Kurfürsten Parfümerie",
        "address": "P7 24, Mannheim"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          8.473097957,
          49.48622848
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "La Majestueuse",
        "address": "73 rue des Remparts, Bordeaux"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -0.5791792597,
          44.83876245
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Le Paravent",
        "address": "35 rue Auguste Comte, Lyon"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.83094887,
          45.75326573
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Le Secret du Marais",
        "address": "Calle Hortaleza, 75 28004 Madrid"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -3.69778,
          40.425267
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Lukse",
        "address": "Serebrennikovskaya Ulitsa, 31, Novosibirsk"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          82.925049,
          55.026864
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Omar",
        "address": "Muscat Oman"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          58.564049,
          23.580222
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Parfumerie Brückner",
        "address": "Kaufingerstraße 28"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          11.57598488,
          48.13671696
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Parfumerie Christophe",
        "address": "Groenlaan 9, Herzele\n"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.34843504,
          50.84645418
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Parfums Uniques",
        "address": "Klenzestrasse 22 (at Gärtnerplatz) , 80469 Munich"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          11.576714,
          48.132303
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Rosamundi",
        "address": "Agora Floreasca building, etaj 1 Calea Floreasca 111–113, Bucharest"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          26.10036475,
          44.46052332
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Sens Unique",
        "address": "13 Rue du Roi de Sicile, 75004 Paris -"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          2.358783,
          48.856095
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Smell Stories",
        "address": "Verversstraat 15, Quartier Saint-Jacques, Bruxelles"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          4.348445769,
          50.84645418
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Space240",
        "address": "240 East 29th st, New York"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -73.978676,
          40.741717
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Spitzenhaus",
        "address": "Börsenstrasse 14, 8001 Zürich"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          8.540685,
          47.368124
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Swan Parfümerie",
        "address": "Stadtpl. 29, 84307 Eggenfelden, Allemagne"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          12.76271351,
          48.40384889
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Zgo",
        "address": "600 Castro street, San Francisco"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          -122.4350598,
          37.7593493
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "La Maison de la Parfumeria",
        "address": "TC Plaza, Karla Marksa 76a, Khabarovsk"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          135.0839907,
          48.48845862
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Renee Parfums",
        "address": "BASKOV LANE, 5, Saint Petersburg"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          30.35250366,
          59.93957671
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Imagine",
        "address": "Prospekt Lenina 25, mall Europa, Yekaterinburg 620014"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          60.59502494,
          56.83882847
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Place Shop",
        "address": "PERM, SOVETSKAYA ST 28A"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          56.23727981,
          58.01347733
        ]
      }
    }
  ]
}
 

const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/zsong000/cktqgt8h803ac17s4nlxt23fr',
        center: [4.804297,
          43.9497271],
        zoom: 2
    });

    // Add markers to the map.
for (const marker of geojson.features) {
  // Create a DOM element for each marker.
  const el = document.createElement('div');
  const width = 30;
  const height=30;
  el.className = 'marker';
  el.style.backgroundImage = `url(https://image.ibb.co/hws0ZK/slm_map_icon.png/${width}/${height}/)`;
  el.style.width = `${width}px`;
  el.style.height = `${height}px`;
  el.style.backgroundSize = '100%';
  new mapboxgl.Marker(el)
    .setLngLat(marker.geometry.coordinates)
    .setPopup(
  new mapboxgl.Popup({ offset: 25 }) // add popups
    .setHTML(`<h3>${marker.properties.name}</h3><p>${marker.properties.address}</p>`)
  )
  .addTo(map);
}

// function displayLocationInfo(position) {
//   const { coords: { latitude, longitude } } = position;

  
//   const center = new mapboxgl.LngLat(longitude, latitude);

//   // Center the map
//   // https://docs.mapbox.com/mapbox-gl-js/api/#map#setcenter
//   map.setCenter(center);
// }
</script>
 
</body>
</html>
